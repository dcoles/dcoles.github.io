---
title: "G+: For the last couple of weeks I've been \u2026"
date: "2017-03-21 02:27:24-0400"
modified_time: "2017-03-21 02:27:24-0400"
layout: post
gplus_orig_url: https://plus.google.com/+DavidColes/posts/FWTHfHCuYpc
---

<article>
<header>
<img src="https://lh3.googleusercontent.com/a-/AAuE7mBMYQroHG03cfOJQ-Lu30rOA8T35GOl9fQUFQwpVeU=s64-c" style="border-radius: 50%"><strong><span class="author">David Coles</span></strong> <time datetime="2017-03-21T02:27:24-04:00" title="2017-03-21 02:27:24-04:00">21 Mar 2017</time></header>
<div class="content">For the last couple of weeks I&#39;ve been interested in Python AST rewriting and some of the interesting possibilities it offers.<br><br>Python doesn&#39;t have syntactic macros or blocks, thus it&#39;s not really possible to directly redefine the language but with a combination of PEP-302 Import Hooks and the ast module you can do some pretty gnarly things.<br><br>- py.test (<a rel="nofollow" target="_blank" href="http://pytest.org" class="ot-anchor bidi_isolate" jslog="10929; track:click" dir="ltr">http://pytest.org</a>) rewrites `assert` statements into function calls to allow better assert inspection in tests.<br>- hy (<a rel="nofollow" target="_blank" href="http://hylang.org" class="ot-anchor bidi_isolate" jslog="10929; track:click" dir="ltr">http://hylang.org</a>) implements a new lisp dialect on top of Python&#39;s AST (allowing full interop and importing between .hy and .py files)<br>- macropy (<a rel="nofollow" target="_blank" href="https://github.com/lihaoyi/macropy" class="ot-anchor bidi_isolate" jslog="10929; track:click" dir="ltr">https://github.com/lihaoyi/macropy</a>) implements a full syntactic macro system that&#39;s run at import time.<br><br><a rel="nofollow" class="ot-hashtag bidi_isolate" href="https://plus.google.com/s/%23Python/posts" >#Python</a> <a rel="nofollow" class="ot-hashtag bidi_isolate" href="https://plus.google.com/s/%23AST/posts" >#AST</a></div><hr>
<a href="https://pybites.blogspot.com/2011/07/behind-scenes-of-pytests-new-assertion.html">
<h2>Behind the scenes of py.test's new assertion rewriting</h2>
</a>
</article>
<hr>
<div class="plusOnes" style="text-align: right"><strong>(+1's)</strong> 1</div>